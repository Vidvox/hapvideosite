<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>The Hap Codecs Homepage</title>
  <meta name="description" content="The Hap Codecs Homepage">

  <!-- This image is shown when hapcodecs.org is linked to on social
  media or in most chat apps -->
  <meta name="og:image" content="http://hapcodecs.org/TODO: SOME IMAGE HERE">

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="css/flickity.min.css">
  <link rel="stylesheet" href="css/hap.css">
</head>

<body>

  <h1>Using The Hap Codecs</h1>
  <p>Movies that are encoded with the Hap codecs are typically exported into standard .mov or .avi containers just like other video files you are used to working with.</p>
  <h3>Choosing The Right Codec For The Job: Hap, Hap Alpha, Hap Q and Hap Q Alpha</h3>
   <p>There are four different flavors of Hap to choose from when encoding your clips.</p>
   <ul>
   <li>Hap has the lowest data-rate and reasonable image quality.
   <li>Hap Alpha has similar image quality to Hap, and supports an Alpha channel.
   <li>Hap Q has improved image quality, at the expense of larger file sizes.
   <li>Hap Q Alpha has improved image quality and an Alpha channel, at the expense of larger file sizes.
   </ul>
   <p>Hap and Hap Alpha include an optional quality setting when encoding. Lower quality will in some cases translate to a smaller file size.</p>
   <p>Hap Q and Hap Q Alpha allow for encoding with an optional specified 'chunk' size to optimize encodings for ultra high resolution video on a particular hardware system. This setting should typically only be used if you are reaching a CPU performance bottleneck during playback. As a general guide, for HD footage or smaller you can set the chunk size to 1 and for 4k or larger footage the number of chunks should never exceed the number of CPU cores on the computer that will playback the file.</p>
  <h3>Playing Hap Movies</h3>
  <p>A movie file encoded in one of the Hap codecs will playback just like any other video in <a href="who-supports-hap-codecs.html">over 20 different popular applications and creative coding environments</a> on macOS, Windows and Linux, often without installing any additional software. Typically any audio tracks that are also included with the movie are played back by the host application.</p>
  <h3>Encoding Movie Files To Hap</h3>
  <p>One of the advantages of Hap is that it can be often exported to from most QuickTime and FFMPEG based exporting softwares making it easy to fit into existing encoding workflows.</p>
    <ul>
	  <li>Using the free QuickTime extension you can export to Hap directly from many existing video rendering software and batch exporting applications. This extension is often bundled in the installer for many software packages or <a href="https://github.com/Vidvox/hap-qt-codec/releases">downloaded from GitHub</a>.
	  <li>On the macOS there is a <a href="https://github.com/Vidvox/hap-in-avfoundation/releases">free opensource batch exporter tool from VIDVOX</a> that will encode to and from AVFoundation supported codecs.
	  <li>FFMPEG can be used from the commandline to encode to Hap.
	  <li>Some media servers provide their own tools for transcoding movies into Hap for their platforms.
	</ul>
  <h4>Transcoding to Hap using the QuickTime export panel</h4>
  <p>Many applications and batch exporters support QuickTime as an export option which includes a standard option panel for codec selection and parameter adjustment. When the Hap QuickTime component is installed the Hap, Hap Alpha, Hap Q and Hap Q Alpha options will show up in the "Compression Type" menu. When using Hap and Hap Alpha a slider is provided for adjusting the output quality level.</p>
  <h4>Batch Exporting on macOS with the AVF Batch Exporter</h4>
  <p>This simple transcoding tool is arranged into three settings panels and can be used to convert multiple files to the specified output codec settings in a single export session.</p>
    <ol>
      <li>Files To Convert: Drag movie files to this area from the Finder or click the Import button to select media to be transcoded.
      <li>Output Format: Click the 'Settings' button to open the panel for adjusting the audio and video codec setting options. For audio and video you can specify whether the media should be transcoded or left unchanged.
        <p>In addition to specifying a video codec (Hap, PhotoJPEG, H.264 or Pro Res) the follow sub options may appear depending on the format.</p>
        <ul>
          <li>Quality: When available adjusts the overall tradeoff between file size and loss of data.
          <li>Chunked Encoding/Decoding: For the Hap codecs a chunking size can be set as an optimization for specific hardware. The default is 1 and should never exceed the number of CPU cores in the playback system.
          <li>Profile: For h.264 this sets which encoder profile should be used.
          <li>Key Frames: For h.264 this sets how often a keyframe should be inserted into the stream. Default is automatic
          <li>Data Rate: For h.264 this allows for limiting the data rate to a maximum amount. Default is automatic.
          <li>Multi-pass Encoding: For h.264 this enables multi-pass encoding.
        </ul>
      <li>File Renaming and Destination Folder: Optional settings for removing, appending or prefixing characters to the file name string and adjusting the output folder.
    </ol>
  <h4>Encoding to Hap from the commandline using FFMPEG</h4>
  <p>For users who prefer working with a commandline or need to access advanced encoding settings for Hap the popular FFMPEG library can be used to work with Hap movies.</p>
   <ol>
   <li>If this is your first time using FFMPEG you may need to compile or install it on your system. In either case be sure that Snappy is included as part of the binary. If you already have FFMPEG on your system with Snappy you can skip this step.
     <ul>
       <li>Visit <a href="https://trac.ffmpeg.org/wiki/CompilationGuide">the FFMPEG wiki</a> for instructions on how to compile FFMPEG from scratch on for macOS, Windows and Linux.
       <li>On the Mac you can use Homebrew for installing FFMPEG with the following commands:<p>
         <p><em>ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</em></p>
         <p><em>brew install ffmpeg --with-snappy</em></p>
     </ul>
   <li>Navigate to the directory that contains the movies you wish to convert using the "cd" commands.
   <li>Invoke FFMPEG to convert your files.
     <ul>
       <li>For Hap movies use the following command:
       <p><em>ffmpeg -i yourSourceFile.mov -c:v hap outputName.mov</em></p>
       <li>For Hap Alpha movies use the following command:
       <p><em>ffmpeg -i yourSourceFile.mov -c:v hap -format hap_alpha outputName.mov</em></p>
       <li>For Hap Q movies use the following command:
       <p><em>ffmpeg -i yourSourceFile.mov -c:v hap -format hap_q outputName.mov</em></p>
     </ul>
     <p>In addition you can also specify the following optional flags that can be used to create Hap movies that are highly optimized for specific playback hardware. You should only use these in extreme cases if you have reached a specific bottleneck when using the default settings.</p>
     <ul>
       <li>-chunks N (default is 1; N is a number from 1-64 that does not exceed the number of CPU cores in the playback system)
       <p><em>ffmpeg -i yourSourceFile.mov -c:v hap -format hap_q -chunks 4 outputName.mov</em></p>
       <li>-compressor snappy or -compressor none (default is snappy; when set to none may marginally reduce CPU usage in exchange for much larger file sizes that are a fixed bit-rate)
       <p><em>ffmpeg -i yourSourceFile.mov -c:v hap -compressor none outputName.mov</em></p>
     </ul>
   </ol>
  <p>Copyright Â©2017 VIDVOX</p>

  <script>
    window.ga=function(){ga.q.push(arguments)};ga.q=[];ga.l=+new Date;
    ga('create','UA-92175193-1','auto');ga('send','pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</body>
</html>
